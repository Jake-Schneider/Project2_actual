<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function($scope) {
  $scope.abrahamTotal = new GlideAjax('voteByCandiate');
	abrahamTotal.addParam('sysparm_name', 'getAbrahamTotal');
	abrahamTotal.addParam('sysparm_vote', g_form.getValue('u_vote'));
	abrahamTotal.getXML(showAbrahamTotal);
	
	$scope.andrewTotal = new GlideAjax('voteByCandiate');
	andrewTotal.addParam('sysparm_name', 'getAndrewTotal');
	andrewTotal.addParam('sysparm_vote', g_form.getValue('u_vote'));
	andrewTotal.getXML(showAndrewTotalTotal);
	
	function showAbrahamTotal(response){
		$scope.total = response.responseXML.documentElement.getAttribute('answer');
		return(total);
}
	
	function showAndrewTotal(response){
		$scope.atotal = response.responseXML.documentElement.getAttribute('answer');
		return(atotal);
}
	
}]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>polling_results</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>Polling Results</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[var voteByCandiate = Class.create();
voteByCandiate.prototype = Object.extendsObject(global.AbstractAjaxProcessor, {
	
	getAbrahamTotal: function() {
		var count = new GlideRecord("x_393642_project_2_vote");
		count.addQuery('u_vote=', "Abraham Lincoln");
		count.addAggregate('COUNT');
		count.query();
			
		var total = 0;
			if (count.next()){
				total = count.getAggregate('COUNT');
			}
			return total;
	},
	
	getAndrewTotal: function() {
		var count = new GlideRecord("x_393642_project_2_vote");
		count.addQuery('u_vote=', "Andrew Jackson");
		count.addAggregate('COUNT');
		count.query();
			
		var total = 0;
			if (count.next()){
				total = count.getAggregate('COUNT');
			}
			return total;
	},
    type: 'voteByCandiate'
	
});
]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-09-23 23:16:36</sys_created_on>
        <sys_id>2752254adb040010915861ca0b9619a2</sys_id>
        <sys_mod_count>14</sys_mod_count>
        <sys_name>Polling Results</sys_name>
        <sys_package display_value="Project 2" source="x_393642_project_2">13a33988db440010ac38dde748961923</sys_package>
        <sys_policy/>
        <sys_scope display_value="Project 2">13a33988db440010ac38dde748961923</sys_scope>
        <sys_update_name>sp_widget_2752254adb040010915861ca0b9619a2</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-09-24 01:52:00</sys_updated_on>
        <template><![CDATA[<div id="polling">
    <span>
      <h3>
         Abraham Lincoln
      </h3>
      <p>
        Total: {{$scope.total}}
      </p>
    </span>
    <span>
      <h3>
        Andrew Jackson
      </h3>
      <p>
        Total: {{$scope.aTotal}}
      </p>
    </span>
</div>]]></template>
    </sp_widget>
</record_update>
